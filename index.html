<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Colorado Governor campaign finance</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>


<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/u/dt/jq-2.2.3,dt-1.10.12,r-2.1.0/datatables.min.css"/>

<style>
tfoot {
    display: table-caption;
}

table.dataTable tbody th, table.dataTable tbody td {
    padding: 8px 10px;
    font-family: 'Open Sans', sans-serif;
	}
	
	th.sorting {
    font-family: 'Open Sans', sans-serif;
}

label {
	 font-family: 'Open Sans', sans-serif;
}

table.dataTable tfoot th, table.dataTable tfoot td {
padding: 10px 18px 6px 18px;
border-top: none;
	}

#select-candidate {
  text-align: center;
}

#candidate-info {
  background: green;
}

</style>

</head>

<body>


<div id ="select-candidate"> </div>

<div id = "candidate-info"> </div>


<table id="example" class="display" cellspacing="0" width="100%">
<caption></caption>
        <thead>
            <tr>
          
               <th>co_id</th>
               <th class= "select-filter">candidate</th>
               <th> party </th>

               <th>contribution Amount </th>
              <th>date</th>
              <th>donor</th>
              <th>city</th>
              <th>state</th>
              <th>zip</th>
              <th> record </th>
              <th>Contribution type</th>
              <th> employer </th>
              <th>occuption</th>
                <th>Total raised</th>
                <th>number of doncations</th>
            </tr>
        </thead>

           
    </table>


<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
 
<script type="text/javascript" src="https://cdn.datatables.net/u/dt/jq-2.2.3,dt-1.10.12,r-2.1.0/datatables.min.js"></script>




<script>
$(document).ready(function() {
    $('#example').DataTable( {
 "ajax": "data/candidate_json.json",

	columns: [
            { data: 'CO_ID' },
            { data: 'candidate_full' },
            { data: 'party' },
            { data: 'ContributionAmount',
            render: $.fn.dataTable.render.number( ',', '.', 2, '$' )
             },
            { data: 'ContributionDate' },
            { data: 'donor' },
            { data: 'city' },
            { data: 'State' },
            { data: 'Zip' },
            { data: 'RecordID' },
            { data: 'ContributionType' },
            { data: 'employer' },
            { data: 'Occupation' },
            { data: 'sumDonations', 
             render: $.fn.dataTable.render.number( ',', '.', 2, '$' )
            },
            { data: 'totalDonations', 
             render: $.fn.dataTable.render.number( ',', '.', 2, )
            }
          

        ],
    "responsive": true,
    "iDisplayLength": 50,
    "deferRender": true,

	 "columnDefs": [
            {
                "targets": [0],
                "visible": false,
                "searchable": false
            }
        ],

        initComplete: function () {
            this.api().columns('.select-filter').every( function () {
                var column = this;
                var select = $('<select><option value="">Select a candidate</option></select>')
                    .appendTo( $('#select-candidate').empty() )
                    .on( 'change', function () {
                        var val = $.fn.dataTable.util.escapeRegex(
                          
                            $(this).val(),
                            clearDiv(),
                            getCandidate($(this).val())
                            // clearDiv()
                            
                        );
 
                        column
                            .search( val ? '^'+val+'$' : '', true, false )
                            .draw();
                    } );
 
                column.data().unique().sort().each( function ( d, j ) {
                    select.append( '<option value="'+d+'">'+d+'</option>' )
                  
                } );
            } );
        }

        // getCandidate: function(candidate) {
        //   console.log(candidate)
        // }

        
} );

    


 
    
function clearDiv () {
$('#candidate-info').html("")
}



function setCandidate(candidate) {
  $('#candidate-info').prepend(candidate);

}



  function getCandidate(candidate) {

 $('#candidate-info').prepend(candidate);
  }
//     if( $('#candidate-info').length ) {
//       console.log('this has length')
//       $('#candidate-info').html("")
//   } 
//     console.log('no length')
  
// }
   
  //     if ($('#candidate-info').html().length > 0){
  // $('#candidate-info').prepend(candidate)  
  //  } else {
  //    ($('#candidate-info').html("")) 

  //  }
   
   // $('#candidate-info').prepend(candidate)  
   // console.log($("#candidate-info").html().length )
   

   // ($('#candidate-info').html("")) 
 




//  function clearDiv() {
// if ($("#candidate-info").text().length <= 1) {
//      console.log($("#candidate-info").html().length )
     // $('#candidate-info').empty();
//    }                                    
// }

// $('#candidate-info').empty();

    
  // console.log("this is candidate" + candidate)
  
 
  // console.log("this is candidate value" + candidateValue)

  
  // clearDiv()

  // if (candidateValue === candidate) {
  //   console.log('it works')
  // } else {
  //   console.log('not working')
  // }

 

  // function tryCandidate (candidate) {
    
  //   var candidateValue = $(this).find('select').val();
  //   getCandidate('Ed Perlmutter', candidateValue)
  //   // console.log(($(this).find('select').val()));

  // }
  
  function selectCandidate() {
    var candidateValue = $(this).find('select').val();
   
    console.log(candidateValue)
    

    clearDiv();

    if (candidateValue === 'Ed Perlmutter') {
       $('#candidate-info').prepend('Perlmutter');

      // $('#candidate-info').prepend('Perlmutter')
    }

     else if 
      (candidateValue ==="George Brauchler") {
       $('#candidate-info').prepend('Brauchler')
    }else if 
      (candidateValue ==="Jared Polis") {
       $('#candidate-info').prepend('Polis')
    } else if 
      (candidateValue ==="Michael Johnston") {
       $('#candidate-info').prepend('Johnston')
    } else {
      console.log('candidate doesnt appear' )
    }
  //     // clearDiv()
  }

  // function clearDiv () {
  //   if (($('#candidate-info').html())) {
  //     console.log('this has info in it')
  //   } else {
  //     console.log('this has no info in it')
  //   }
  //   // ($('#candidate-info').html("")) 
  // }


} ); 
// end of document ready


</script>


<script>



 var candidateTotal = [
 {
  name: 'George Brauchler',
  total: 190696.4
 },
{
  name: 'Michael Johnston',
  total: 943366.15
 },
 {
  name: 'Cary Kennedy',
  total: 342695.28
 }

 ]

 candidateTotal.forEach(function(candidate){
  console.log(candidate.name + ' has raised $' + candidate.total)

 })



</script>


</body>
</html>
